# 📖 益阅读 - 智能网页阅读助手

> 一个功能强大的 Chrome 浏览器扩展，专注于提供纯净、舒适的网页阅读体验，并集成 AI 对话助手和笔记本功能。

## 🎯 项目简介

**益阅读** 是一款智能化的网页阅读优化工具，能够自动提取网页正文内容，去除广告和干扰元素，为用户提供专注、舒适的阅读环境。同时集成 AI 对话助手，支持基于网页内容的智能问答，以及笔记记录功能。

## ✨ 核心功能

### 1. **智能内容提取**
- 🎯 使用 Readability 算法自动识别并提取网页正文
- 🖼️ 智能提取图片信息（支持 alt、title、caption 等元数据）
- 🎬 支持视频内容提取（包括本地 video 标签和 iframe 嵌入视频）
- 📝 保留文章标题、作者、发布时间等元信息
- 🧹 自动清理广告、导航栏等干扰元素

### 2. **个性化阅读体验**
- 🎨 自定义字体大小、行高、字体族
- 🌈 自定义文字颜色和背景颜色
- 📏 可调节文章最大宽度
- 🌓 支持浅色/暗色模式切换
- 📐 可拖拽调整阅读区域和侧边栏宽度

### 3. **AI 智能对话助手**
- 🤖 集成 ModelScope API（Qwen2.5-7B-Instruct 模型）
- 💬 支持流式响应，实时显示 AI 回复
- 📄 一键提取网页内容作为对话上下文
- 📝 支持 Markdown 格式渲染
- 💾 完整的对话历史记录

### 4. **笔记功能**
- 📔 独立的笔记本标签页
- 💾 实时保存笔记内容
- 🔄 与阅读内容无缝集成

### 5. **响应式设计**
- 📱 适配不同屏幕尺寸
- 🎯 图片和视频自动响应式布局
- 🔄 流畅的动画过渡效果

## 🛠️ 技术栈

### 核心技术
- **JavaScript (ES6+)** - 核心开发语言
- **Chrome Extension Manifest V3** - 浏览器扩展架构
- **DOM API** - 网页内容操作
- **CSS3** - 样式和动画

### 核心库
- **Readability.js** - 内容提取算法，Mozilla 开源项目
- **Marked.js** - Markdown 解析和渲染
- **ModelScope API** - AI 模型服务（Qwen2.5-7B-Instruct）

### 浏览器 API
- `chrome.storage.sync` - 设置同步存储
- `chrome.runtime` - 扩展运行时通信
- `chrome.tabs` - 标签页管理
- `chrome.contextMenus` - 右键菜单
- `Content Scripts` - 内容脚本注入
- `Service Worker` - 后台服务

### 架构模式
- **模块化设计** - 功能模块清晰分离
- **事件驱动** - 基于事件的交互逻辑
- **异步编程** - Promise/async-await 处理异步操作

## 🌟 项目亮点

### 1. **智能内容提取算法**
- 采用 Mozilla Readability 算法，准确识别正文内容
- 支持多种网页结构，兼容性强
- 自动处理 HTML 实体编码，确保特殊字符正确显示

### 2. **流式 AI 对话体验**
```javascript
// 实时流式响应处理
const reader = response.body.getReader();
const decoder = new TextDecoder();
while (true) {
  const { done, value } = await reader.read();
  if (done) break;
  // 实时更新 UI，提供流畅的用户体验
}
```

### 3. **灵活的布局系统**
- 可拖拽调整阅读区域宽度（200px - 1200px）
- 响应式侧边栏设计
- 智能适配不同内容类型（文本、图片、视频、表格）

### 4. **完善的暗色模式支持**
- 深度优化的暗色主题，所有 UI 元素都有对应样式
- 代码块、表格、图片等元素完美适配
- 平滑的主题切换动画

### 5. **代码块优化处理**
- 自动解码 HTML 实体，确保代码中的特殊字符（=, (), <, > 等）正确显示
- 支持语法高亮样式
- 浅色和暗色模式下的代码可读性优化

### 6. **视频内容智能识别**
- 支持本地 `<video>` 标签
- 支持 iframe 嵌入视频（YouTube、Bilibili、优酷、腾讯视频、爱奇艺等）
- 自动创建响应式容器，保持 16:9 宽高比

### 7. **性能优化**
- 图片懒加载（lazy loading）
- 异步解码图片（async decoding）
- CSS 变量实现动态主题切换，避免重复渲染
- 事件委托减少 DOM 操作

### 8. **用户体验细节**
- 快捷键支持（Ctrl+Shift+R / Cmd+Shift+R）
- 键盘快捷键（Enter 发送，Shift+Enter 换行）
- 自动滚动到最新消息
- 加载状态提示
- 错误处理和提示

## 📁 项目结构

```
readtest/
├── manifest.json          # 扩展配置文件
├── content.js             # 内容脚本（核心功能）
├── ability.js             # 内容提取和媒体处理
├── background.js          # 后台服务脚本
├── popup.html/js          # 扩展弹窗
├── options.html           # 设置页面
├── reader.css             # 阅读器样式
├── Readability.js         # 内容提取算法库
├── marked.min.js          # Markdown 解析库
├── site.js                # 站点特定脚本
└── icons/                 # 图标资源
    ├── icon16.png
    ├── icon48.png
    ├── icon128.png
    └── background.jpg
```

## 🚀 使用方法

### 安装
1. 下载项目文件
2. 打开 Chrome 浏览器，进入 `chrome://extensions/`
3. 启用"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择项目文件夹

### 使用
- **快捷键**: `Ctrl+Shift+R` (Windows/Linux) 或 `Cmd+Shift+R` (Mac)
- **点击扩展图标**: 在弹窗中点击"开启阅读模式"
- **右键菜单**: 在网页中右键选择"开启阅读模式"

## ⚙️ 配置说明

### 阅读设置
- 字体大小：12px - 32px
- 行高：1.0 - 2.5
- 字体族：系统默认 / 自定义
- 文字颜色：自定义颜色选择
- 背景颜色：自定义颜色选择
- 最大宽度：300px - 1400px
- 暗色模式：开启/关闭

### AI 配置
- API 密钥：ModelScope API Key
- 模型：Qwen/Qwen2.5-7B-Instruct
- 温度参数：0.7（可调整）
- 最大 Token：2000（可调整）

## 🎨 特色功能展示

### 1. 内容提取
- ✅ 自动提取文章正文
- ✅ 保留图片和说明文字
- ✅ 识别并处理视频内容
- ✅ 保留表格结构和数据

### 2. 阅读优化
- ✅ 去除广告和干扰元素
- ✅ 优化排版和间距
- ✅ 响应式图片处理
- ✅ 代码块格式化

### 3. AI 助手
- ✅ 基于网页内容的智能问答
- ✅ 流式响应显示
- ✅ Markdown 格式支持
- ✅ 对话历史管理

## 🔮 未来规划

- [ ] 支持更多 AI 模型（OpenAI、Claude 等）
- [ ] 导出笔记为 Markdown/PDF
- [ ] 阅读统计和数据分析
- [ ] 多语言支持
- [ ] 阅读历史记录
- [ ] 书签收藏功能
- [ ] 自定义主题和样式
- [ ] 语音朗读功能

## 📄 许可证

本项目为个人开发项目，仅供学习交流使用。

## 👤 作者

**wenyidu**

---

**让阅读更纯粹，让学习更高效** ✨

